<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Laundry Management System</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    .service-card {
      border-radius: 12px;
      padding: 16px;
      background: #fff;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
      height: 100%;
    }
    .service-icon {
      width: 64px;
      height: 64px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius: 10px;
      background: rgba(13,110,253,0.06);
      color: #0d6efd;
      font-size: 26px;
    }
    .feature-card {
      padding: 22px;
      border-radius: 14px;
      background: white;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
      text-align: center;
    }
    .testimonial-box {
      background: #fff;
      border-radius: 12px;
      padding: 18px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
      height: 100%;
    }
    .avatar { width:56px; height:56px; border-radius:50%; object-fit:cover; }
    .whatsapp-float {
      position: fixed;
      bottom: 22px;
      right: 22px;
      width: 60px;
      height: 60px;
      background: #25D366;
      color: white;
      border-radius: 50%;
      font-size: 28px;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index: 9999;
      box-shadow: 0 6px 20px rgba(0,0,0,0.18);
      text-decoration: none;
    }
    .star { color: #f6c84c; }
  </style>
</head>
<body>

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand fw-bold" href="/">
        <i class="bi bi-droplet-half me-2"></i> Laundry System
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="nav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#services">Services</a></li>
          <li class="nav-item"><a class="nav-link" href="#calculator">Calculator</a></li>
          <li class="nav-item"><a class="nav-link" href="#testimonials">Testimonials</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>

          <!-- Login/Register Restored -->
          <li class="nav-item"><a class="nav-link" href="/login"><i class="bi bi-box-arrow-in-right me-1"></i>Login</a></li>
          <li class="nav-item"><a class="nav-link" href="/register"><i class="bi bi-person-plus me-1"></i>Register</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <section class="py-5 mt-4">
    <div class="container">
      <div class="row align-items-center min-vh-60">
        <div class="col-lg-6">
          <h1 class="fw-bold text-primary">Professional Laundry Services Made Easy</h1>
          <p class="text-muted">
            Experience hassle-free laundry management with our modern system.
            Schedule pickups, track your orders, and get fresh clothes delivered right to your doorstep.
          </p>

          <div class="mt-3">
            <a href="/register" class="btn btn-primary btn-lg me-2">
              <i class="bi bi-person-plus me-2"></i>Get Started
            </a>
            <a href="/login" class="btn btn-outline-primary btn-lg">
              <i class="bi bi-box-arrow-in-right me-2"></i>Sign In
            </a>
          </div>
        </div>

        <div class="col-lg-6 text-center">
          <i class="bi bi-droplet-half display-1 text-primary mb-4"></i>

          <!-- 4 Feature Cards -->
          <div class="row g-3">
            <div class="col-6">
              <div class="feature-card">
                <i class="bi bi-clock-history fs-2 text-primary"></i>
                <p class="mt-2 mb-0 fw-semibold">Quick Service</p>
              </div>
            </div>
            <div class="col-6">
              <div class="feature-card">
                <i class="bi bi-truck fs-2 text-primary"></i>
                <p class="mt-2 mb-0 fw-semibold">Free Pickup</p>
              </div>
            </div>
            <div class="col-6">
              <div class="feature-card">
                <i class="bi bi-shield-check fs-2 text-primary"></i>
                <p class="mt-2 mb-0 fw-semibold">Quality Care</p>
              </div>
            </div>
            <div class="col-6">
              <div class="feature-card">
                <i class="bi bi-headset fs-2 text-primary"></i>
                <p class="mt-2 mb-0 fw-semibold">24/7 Support</p>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

  <!-- SERVICES -->
  <section id="services" class="py-5 bg-light">
    <div class="container">
      <div class="row mb-4">
        <div class="col text-center">
          <h2 class="fw-bold">Our Services</h2>
          <p class="text-muted">Affordable, fast & reliable laundry care</p>
        </div>
      </div>

      <div class="row g-4">
        <% if (services && services.length > 0) { %>
          <% services.forEach(function(s){ const price = Number(s.price) * 100; %>
            <div class="col-md-6">
              <div class="service-card d-flex gap-3">
                <div class="service-icon"><i class="bi bi-droplet"></i></div>
                <div class="flex-grow-1">
                  <h5 class="mb-1"><%= s.name %></h5>
                  <p class="text-muted mb-2"><%= s.description %></p>

                  <div class="d-flex align-items-center justify-content-between">
                    <div class="text-success fw-bold">NPR <%= price.toLocaleString() %>/kg</div>
                    <a href="/user/new-request/<%= s.id %>" class="btn btn-sm btn-outline-primary">Order</a>
                  </div>
                </div>
              </div>
            </div>
          <% }) %>
        <% } %>
      </div>
    </div>
  </section>

  <!-- CALCULATOR -->
  <section id="calculator" class="py-5">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-7">
          <div class="card p-4 shadow-sm">
            <h5 class="mb-3">Laundry Price Calculator</h5>

            <div class="mb-3">
              <label class="form-label">Select Service</label>
              <select id="calcService" class="form-select">
                <% services.forEach(function(s){ const price = Number(s.price) * 100; %>
                  <option value="<%= price %>">
                    <%= s.name %> — NPR <%= price.toLocaleString() %>/kg
                  </option>
                <% }) %>
              </select>
            </div>

            <div class="mb-3">
              <label class="form-label">Weight (kg)</label>
              <input id="calcWeight" type="number" min="1" class="form-control" placeholder="Enter weight in kg">
            </div>

            <button id="calcBtn" class="btn btn-primary w-100">Calculate</button>
            <div id="calcResult" class="alert alert-info d-none text-center mt-3"></div>

          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TESTIMONIALS -->
  <section id="testimonials" class="py-5 bg-light">
    <div class="container">
      <div class="row mb-4">
        <div class="col text-center">
          <h2 class="fw-bold">What Our Customers Say</h2>
        </div>
      </div>

      <div class="row g-4">
        <% testimonials.forEach(t => { %>
          <% const rating = Number(t.rating || 5); %>

          <div class="col-md-4">
            <div class="testimonial-box">
              <div class="d-flex align-items-center mb-3">
                <img src="<%= t.image %>" class="avatar me-3">
                <div>
                  <strong><%= t.name %></strong><br>
                  <small class="text-muted"><%= t.location %></small>
                </div>
              </div>

              <p class="text-muted"><%= t.message %></p>

              <div>
                <% for (let i=1; i<=5; i++){ %>
                  <% if(i <= rating){ %>
                    <i class="bi bi-star-fill star"></i>
                  <% } else { %>
                    <i class="bi bi-star star" style="opacity: 0.3;"></i>
                  <% } %>
                <% } %>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="py-5">
    <div class="container text-center">
      <h3 class="fw-bold">Reach Us</h3>
      <p class="text-muted">
        Gaindakot-11, Nawalpur<br>
        Call: +977 9825482289 • Email: santoshballu321@gmail.com
      </p>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-dark text-light py-3 text-center">
    © <%= new Date().getFullYear() %> Laundry Management System — Version 2.0
  </footer>

  <!-- WhatsApp -->
  <a class="whatsapp-float" href="https://wa.me/9779825482289" target="_blank">
    <i class="bi bi-whatsapp"></i>
  </a>

  <!-- Scripts -->
  <script>
    document.getElementById('calcBtn').onclick = function(){
      const price = Number(document.getElementById('calcService').value);
      const kg = Number(document.getElementById('calcWeight').value);

      if(!kg || kg <= 0){
        alert("Enter valid weight.");
        return;
      }

      const total = price * kg;
      const r = document.getElementById('calcResult');
      r.classList.remove('d-none');
      r.innerText = "Total: NPR " + total.toLocaleString();
    };
  </script>

</body>
</html>
